{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="cnt-overall" id="cnt-overview">
    <div id="left-col">
        <div class="flex-centre" id="left-col-header-cnt">
            <div id="sm-logo-cnt">
                <img src="{% static 'general/images/sxd_logo_60px.PNG' %}">
            </div>
            <div class="med-header-txt" id="left-col-info-header">
                Team Centre<text class="sxd-y">.</text>
            </div>
        </div>

        <div class="flex-spc-even" id="left-col-name-logo-cnt">
            <div id="sm-team-logo-cnt">
                <span class="Centerer"></span>
                <img src="{% static 'general/images/rosmini_logo_org.PNG' %}">
            </div>
            <div class="flex-down med-std-txt" id="left-col-info-header">
                <div>Rosmini College 1st XV<text class="sxd-y">.</text></div>
                <div><text class="sxd-y">2021</text> Season<text class="sxd-y">.</text></div>
            </div>
        </div>

        <div id="left-col-btns-cnt">
           <nav class="sidebar-nav">
                <ul class="med-std-txt" id="side-bar-menu-cnt">
                    <li id="side-bar-menu-item" class="flex-centre">
                        <a onclick="showStandings('{{user.username}}')" class="basic-btns hvr-icon-spin">
                            <img class="hvr-icon" src="{% static 'general/images/schedule.PNG' %}">
                            <text class="side-txt">Standings</text>
                        </a>
                    </li>
                    <li id="side-bar-menu-item" class="flex-centre">
                        <a onclick="showFixturesResults();" class="basic-btns hvr-icon-spin">
                            <img class="hvr-icon" src="{% static 'general/images/podium.PNG' %}">
                            <text class="side-txt">Fixtures and Results</text>
                        </a>
                    </li>
                    <li id="side-bar-menu-item" class="flex-centre">
                        <a href="/upload" class="basic-btns hvr-icon-spin">
                            <img class="hvr-icon" src="{% static 'general/images/upload.PNG' %}">
                            <text class="side-txt">Upload Footage</text>
                        </a>
                    </li>
                </ul>
           </nav>
        </div>
        <div id="left-col-extras-box-cnt">

        </div>
    </div>
    <div id="middle-col">
        <div class="lg-team-logo-cnt" id="lg-team-logo-cnt-id">
            <span class="Centerer"></span>
            <img src="{% static 'general/images/rosmini_logo_org_lg.PNG' %}">
        </div>
        <div class="lger-header-txt" id="tm-header">Rosmini College <text class="sxd-y">1st XV.</text></div>
        <div class="med-header-txt" id="tm-season">2021 Season<text class="sxd-y">.</text></div>
        <button class="std-btn med-std-txt" id="season-choose-btn">Choose Season</button>
        <div class="lg-header-txt" id="tc-home-main-header"></div>
        <div class="lg-container-mid" id="tc-home-main-content"></div>
    </div>
    <div id="right-col">
    </div>
</div>


<script type="text/javascript" src="{% static 'general/js/TeamCentreData.js' %}"></script>
<script type="text/javascript" src="{% static 'general/js/TeamCentreMain.js' %}"></script>
<script>
    var data = JSON.parse("{{ data|escapejs }}");

    showStandings(data["team_user_name"]);

    function showFixturesResults(){
    
        var games = data["team_game_data"];
        let no_cols = 6;
        console.log("Retrieving Fixtures and Results data:")
        console.log(games);
        $("#tc-home-main-header").html("Fixtures and Results<text class='sxd-y'>.</text>");

        let table_content = '<table class="tbl"><tr><th>Week no.</th><th>Game Against</th>' + 
                            '<th>Score For</th>' +
                            '<th>Score Against</th>' + 
                            '<th>Date</th>' + 
                            '<th>Match Centre</th></tr>';

        for(let i = 0; i < games.length; i++){
            table_content += '<tr>';
            for(let j = 0; j < no_cols; j++){
                if (j == 5){
                table_content += '<td><a href="/match_centre"><button id="match-cntr-btn" class="std-btn" onclick="runMatchCentre(' + 
                                games[i][0].toString() +
                                ');">Match Centre</button></a></td>';
                }
                else{
                    table_content += '<td>' + games[i][j] + '</td>';
                }
            }
            table_content += '</tr>';
    }

    $("#tc-home-main-content").html(table_content);
  }
</script>
{% endblock %}
